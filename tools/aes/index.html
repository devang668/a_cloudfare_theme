<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°å¯†ç åŠ å¯†å·¥å…· (AES-256) - CDN æµ‹è¯•ç‰ˆ</title>
    <style>
        /* æ ·å¼ä»£ç ä¸ä¹‹å‰æä¾›çš„ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ç¾è§‚ç®€æ´å’Œç§»åŠ¨ç«¯å…¼å®¹ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #007bff;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        textarea, input[type="text"], input[type="password"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 16px;
            resize: vertical;
        }
        textarea {
            min-height: 120px;
        }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s ease;
            margin-bottom: 10px;
        }
        #encryptButton {
            background-color: #28a745;
            color: white;
        }
        #encryptButton:hover {
            background-color: #218838;
        }
        #decryptButton {
            background-color: #007bff;
            color: white;
        }
        #decryptButton:hover {
            background-color: #0056b3;
        }
        #encryptedOutput {
            background-color: #e9ecef;
            border: 1px dashed #ced4da;
            padding: 15px;
            word-break: break-all;
            min-height: 50px;
            border-radius: 6px;
            margin-top: 15px;
        }
        .warning {
            color: #dc3545;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 6px;
            text-align: center;
        }
        .note {
            margin-top: 15px;
            color: #6c757d;
            font-size: 0.9em;
            text-align: center;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
            }
            button {
                padding: 15px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>æœ¬åœ° AES-256 å¯†ç åŠ å¯†å·¥å…·</h1>

    <div class="warning">
        **æ³¨æ„ï¼šæœ¬ç‰ˆæœ¬é€šè¿‡ CDN åŠ è½½åŠ å¯†åº“ï¼Œéœ€è¦ç½‘ç»œè¿æ¥ã€‚æ•°æ®åŠ å¯†ä»åœ¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨**ã€‚
    </div>

    <label for="masterKey">æ‚¨çš„æ˜“è®°å¯†é’¥(ä¾‹å¦‚: iloveyou)ï¼š</label>
    <input type="password" id="masterKey" placeholder="è¾“å…¥æ‚¨çš„å¯†é’¥">

    <hr>

    <h2>åŠ å¯†</h2>
    <label for="originalPassword">æ‚¨è¦å¤‡ä»½çš„**åŸå§‹å¯†ç /æ–‡æœ¬** (å¯å«ç©ºæ ¼ã€ç¬¦å·)ï¼š</label>
    <textarea id="originalPassword" placeholder="è¾“å…¥æ‚¨éœ€è¦åŠ å¯†çš„åŸå§‹å¯†ç ï¼Œä¾‹å¦‚ï¼šMySecureP@sswOrd! #12345"></textarea>

    <button id="encryptButton">ğŸ”’ åŠ å¯†</button>

    <label for="encryptedOutput">åŠ å¯†ç»“æœ (Base64æ ¼å¼ï¼Œå¯å¤‡ä»½/åˆ†äº«)ï¼š</label>
    <div id="encryptedOutput"></div>
    <button id="copyEncrypted" onclick="copyToClipboard('encryptedOutput')">å¤åˆ¶å¯†æ–‡</button>

    <hr>

    <h2>è§£å¯†</h2>
    <label for="encryptedInput">è¦è§£å¯†çš„**å¯†æ–‡**ï¼š</label>
    <textarea id="encryptedInput" placeholder="ç²˜è´´æ‚¨å¤‡ä»½çš„åŠ å¯†å­—ç¬¦ä¸²"></textarea>

    <button id="decryptButton">ğŸ”“ è§£å¯†</button>

    <label for="decryptedOutput">è§£å¯†ç»“æœï¼š</label>
    <div id="decryptedOutput" style="background-color: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; min-height: 50px; border-radius: 6px; font-weight: bold; color: #0c5460;"></div>
    
    <p class="note">
        å¦‚æœæ‚¨éœ€è¦**ç¦»çº¿ä½¿ç”¨**ï¼Œè¯·è”ç³»æˆ‘è·å–**å®Œå…¨è‡ªåŒ…å«**ç‰ˆæœ¬ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨åµŒå…¥åŠ å¯†åº“ä»£ç ã€‚
    </p>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js" integrity="sha512-a+SUDuwNzXDvz4XrIcXHuCf089/iJAoN4lmrXJg18XnduKK6YlDHNRalv4yd1N40OKI80tFidF+rqTFKGPoWFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
/* -------------------------------------------------------------
 * è‡ªå®šä¹‰åŠ å¯†/è§£å¯†é€»è¾‘
 * ------------------------------------------------------------- */

function encryptPassword() {
    // æ£€æŸ¥ CryptoJS æ˜¯å¦è¢«æˆåŠŸåŠ è½½
    if (typeof CryptoJS === 'undefined' || typeof CryptoJS.AES === 'undefined') {
        document.getElementById('encryptedOutput').innerText = "é”™è¯¯ï¼šåŠ å¯†åº“æœªåŠ è½½ã€‚è¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ã€‚";
        return;
    }

    const key = document.getElementById('masterKey').value;
    const plaintext = document.getElementById('originalPassword').value;
    const outputDiv = document.getElementById('encryptedOutput');

    if (!key || !plaintext) {
        outputDiv.innerText = 'é”™è¯¯ï¼šå¯†é’¥å’ŒåŸå§‹å¯†ç /æ–‡æœ¬éƒ½ä¸èƒ½ä¸ºç©ºï¼';
        return;
    }

    try {
        const encrypted = CryptoJS.AES.encrypt(
            plaintext,
            key,
            {
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            }
        );
        outputDiv.innerText = encrypted.toString();
    } catch (e) {
        outputDiv.innerText = 'åŠ å¯†å¤±è´¥ï¼š' + e.message;
        console.error(e);
    }
}

function decryptPassword() {
    // æ£€æŸ¥ CryptoJS æ˜¯å¦è¢«æˆåŠŸåŠ è½½
    if (typeof CryptoJS === 'undefined' || typeof CryptoJS.AES === 'undefined') {
        document.getElementById('decryptedOutput').innerText = "é”™è¯¯ï¼šåŠ å¯†åº“æœªåŠ è½½ã€‚è¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ã€‚";
        return;
    }

    const key = document.getElementById('masterKey').value;
    const ciphertext = document.getElementById('encryptedInput').value;
    const outputDiv = document.getElementById('decryptedOutput');

    if (!key || !ciphertext) {
        outputDiv.innerText = 'é”™è¯¯ï¼šå¯†é’¥å’Œå¯†æ–‡éƒ½ä¸èƒ½ä¸ºç©ºï¼';
        return;
    }

    try {
        const decrypted = CryptoJS.AES.decrypt(ciphertext, key);
        const plaintext = decrypted.toString(CryptoJS.enc.Utf8);

        if (plaintext) {
            outputDiv.innerText = plaintext;
        } else {
            outputDiv.innerText = 'è§£å¯†å¤±è´¥ï¼è¯·æ£€æŸ¥æ‚¨çš„å¯†é’¥æ˜¯å¦æ­£ç¡®ï¼Œæˆ–å¯†æ–‡æ˜¯å¦å®Œæ•´æ— è¯¯ã€‚';
        }
    } catch (e) {
        outputDiv.innerText = 'è§£å¯†å¤±è´¥ï¼š' + e.message;
        console.error(e);
    }
}

function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    if (!element.innerText) {
        alert("æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹ã€‚");
        return;
    }

    const text = element.innerText;
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
            alert('å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        }, (err) => {
            alert('æ— æ³•å¤åˆ¶ï¼š' + err);
        });
    } else {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand('copy');
            alert('å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        } catch (err) {
            alert('å¤åˆ¶å¤±è´¥ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶å†…å®¹ã€‚');
        }
        document.body.removeChild(textarea);
    }
}


// ç»‘å®šäº‹ä»¶
document.getElementById('encryptButton').addEventListener('click', encryptPassword);
document.getElementById('decryptButton').addEventListener('click', decryptPassword);

</script>

</body>
</html>